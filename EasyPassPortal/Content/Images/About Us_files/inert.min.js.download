(function(){function k(d,f,l){if(d.nodeType==Node.ELEMENT_NODE){f&&f(d);var a=d.shadowRoot;if(a){k(a,f,a);return}if("content"==d.localName){d=d.getDistributedNodes?d.getDistributedNodes():[];for(a=0;a<d.length;a++)k(d[a],f,l);return}if("slot"==d.localName){d=d.assignedNodes?d.assignedNodes({flatten:!0}):[];for(a=0;a<d.length;a++)k(d[a],f,l);return}}for(d=d.firstChild;null!=d;)k(d,f,l),d=d.nextSibling}function p(d){if(!d.querySelector("style#inert-style, link#inert-style")){var f=document.createElement("style");
f.setAttribute("id","inert-style");f.textContent="\n[inert] {\n  pointer-events: none;\n  cursor: default;\n}\n\n[inert], [inert] * {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n";d.appendChild(f)}}if("undefined"!==typeof window&&"undefined"!==typeof Element){var m=Array.prototype.slice,n=Element.prototype.matches||Element.prototype.msMatchesSelector;class d{constructor(a,c){this._inertManager=c;this._rootElement=a;this._managedNodes=
new Set;this._rootElement.hasAttribute("aria-hidden")?this._savedAriaHidden=this._rootElement.getAttribute("aria-hidden"):this._savedAriaHidden=null;this._rootElement.setAttribute("aria-hidden","true");this._makeSubtreeUnfocusable(this._rootElement);this._observer=new MutationObserver(this._onMutation.bind(this));this._observer.observe(this._rootElement,{attributes:!0,childList:!0,subtree:!0})}destructor(){this._observer.disconnect();this._rootElement&&(null!==this._savedAriaHidden?this._rootElement.setAttribute("aria-hidden",
this._savedAriaHidden):this._rootElement.removeAttribute("aria-hidden"));this._managedNodes.forEach(function(a){this._unmanageNode(a.node)},this);this._inertManager=this._managedNodes=this._rootElement=this._observer=null}get managedNodes(){return new Set(this._managedNodes)}get hasSavedAriaHidden(){return null!==this._savedAriaHidden}set savedAriaHidden(a){this._savedAriaHidden=a}get savedAriaHidden(){return this._savedAriaHidden}_makeSubtreeUnfocusable(a){k(a,b=>this._visitNode(b));let c=document.activeElement;
if(!document.body.contains(a)){let b=a,e=void 0;for(;b;){if(b.nodeType===Node.DOCUMENT_FRAGMENT_NODE){e=b;break}b=b.parentNode}e&&(c=e.activeElement)}a.contains(c)&&(c.blur(),c===document.activeElement&&document.body.focus())}_visitNode(a){a.nodeType===Node.ELEMENT_NODE&&(a!==this._rootElement&&a.hasAttribute("inert")&&this._adoptInertRoot(a),(n.call(a,"a[href],area[href],input:not([disabled]),select:not([disabled]),textarea:not([disabled]),button:not([disabled]),details,summary,iframe,object,embed,video,[contenteditable]")||
a.hasAttribute("tabindex"))&&this._manageNode(a))}_manageNode(a){a=this._inertManager.register(a,this);this._managedNodes.add(a)}_unmanageNode(a){(a=this._inertManager.deregister(a,this))&&this._managedNodes.delete(a)}_unmanageSubtree(a){k(a,c=>this._unmanageNode(c))}_adoptInertRoot(a){let c=this._inertManager.getInertRoot(a);c||(this._inertManager.setInert(a,!0),c=this._inertManager.getInertRoot(a));c.managedNodes.forEach(function(b){this._manageNode(b.node)},this)}_onMutation(a,c){a.forEach(function(b){const e=
b.target;if("childList"===b.type)m.call(b.addedNodes).forEach(function(g){this._makeSubtreeUnfocusable(g)},this),m.call(b.removedNodes).forEach(function(g){this._unmanageSubtree(g)},this);else if("attributes"===b.type)if("tabindex"===b.attributeName)this._manageNode(e);else if(e!==this._rootElement&&"inert"===b.attributeName&&e.hasAttribute("inert")){this._adoptInertRoot(e);const g=this._inertManager.getInertRoot(e);this._managedNodes.forEach(function(h){e.contains(h.node)&&g._manageNode(h.node)})}},
this)}}class f{constructor(a,c){this._node=a;this._overrodeFocusMethod=!1;this._inertRoots=new Set([c]);this._savedTabIndex=null;this._destroyed=!1;this.ensureUntabbable()}destructor(){this._throwIfDestroyed();if(this._node&&this._node.nodeType===Node.ELEMENT_NODE){const a=this._node;null!==this._savedTabIndex?a.setAttribute("tabindex",this._savedTabIndex):a.removeAttribute("tabindex");this._overrodeFocusMethod&&delete a.focus}this._inertRoots=this._node=null;this._destroyed=!0}get destroyed(){return this._destroyed}_throwIfDestroyed(){if(this.destroyed)throw Error("Trying to access destroyed InertNode");
}get hasSavedTabIndex(){return null!==this._savedTabIndex}get node(){this._throwIfDestroyed();return this._node}set savedTabIndex(a){this._throwIfDestroyed();this._savedTabIndex=a}get savedTabIndex(){this._throwIfDestroyed();return this._savedTabIndex}ensureUntabbable(){if(this.node.nodeType===Node.ELEMENT_NODE){var a=this.node;n.call(a,"a[href],area[href],input:not([disabled]),select:not([disabled]),textarea:not([disabled]),button:not([disabled]),details,summary,iframe,object,embed,video,[contenteditable]")?
-1===a.tabIndex&&this.hasSavedTabIndex||(a.hasAttribute("tabindex")&&(this._savedTabIndex=a.tabIndex),a.setAttribute("tabindex","-1"),a.nodeType===Node.ELEMENT_NODE&&(a.focus=function(){},this._overrodeFocusMethod=!0)):a.hasAttribute("tabindex")&&(this._savedTabIndex=a.tabIndex,a.removeAttribute("tabindex"))}}addInertRoot(a){this._throwIfDestroyed();this._inertRoots.add(a)}removeInertRoot(a){this._throwIfDestroyed();this._inertRoots.delete(a);0===this._inertRoots.size&&this.destructor()}}class l{constructor(a){if(!a)throw Error("Missing required argument; InertManager needs to wrap a document.");
this._document=a;this._managedNodes=new Map;this._inertRoots=new Map;this._observer=new MutationObserver(this._watchForInert.bind(this));p(a.head||a.body||a.documentElement);"loading"===a.readyState?a.addEventListener("DOMContentLoaded",this._onDocumentLoaded.bind(this)):this._onDocumentLoaded()}setInert(a,c){if(c){if(!this._inertRoots.has(a)&&(c=new d(a,this),a.setAttribute("inert",""),this._inertRoots.set(a,c),!this._document.body.contains(a)))for(a=a.parentNode;a;)11===a.nodeType&&p(a),a=a.parentNode}else this._inertRoots.has(a)&&
(this._inertRoots.get(a).destructor(),this._inertRoots.delete(a),a.removeAttribute("inert"))}getInertRoot(a){return this._inertRoots.get(a)}register(a,c){let b=this._managedNodes.get(a);void 0!==b?b.addInertRoot(c):b=new f(a,c);this._managedNodes.set(a,b);return b}deregister(a,c){const b=this._managedNodes.get(a);if(!b)return null;b.removeInertRoot(c);b.destroyed&&this._managedNodes.delete(a);return b}_onDocumentLoaded(){m.call(this._document.querySelectorAll("[inert]")).forEach(function(a){this.setInert(a,
!0)},this);this._observer.observe(this._document.body||this._document.documentElement,{attributes:!0,subtree:!0,childList:!0})}_watchForInert(a,c){const b=this;a.forEach(function(e){switch(e.type){case "childList":m.call(e.addedNodes).forEach(function(h){if(h.nodeType===Node.ELEMENT_NODE){var q=m.call(h.querySelectorAll("[inert]"));n.call(h,"[inert]")&&q.unshift(h);q.forEach(function(r){this.setInert(r,!0)},b)}},b);break;case "attributes":if("inert"===e.attributeName){e=e.target;var g=e.hasAttribute("inert");
b.setInert(e,g)}}},this)}}if(!HTMLElement.prototype.hasOwnProperty("inert")){const a=new l(document);Object.defineProperty(HTMLElement.prototype,"inert",{enumerable:!0,get:function(){return this.hasAttribute("inert")},set:function(c){a.setInert(this,c)}})}}})();
